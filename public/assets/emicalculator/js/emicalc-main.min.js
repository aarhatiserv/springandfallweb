/**
  Main Script that creates EMI Calculator Widget
  Author: https://emicalculator.net/
*/
(function() {
  function p() {
    a("#ecww-widget-iframeinner").html('<form id="ecww-formwrapper" class="col-xs-12 col-sm-4 no-pad"><h2 id="ecww-header">EMI Calculator</h2><div id="ecww-form"><div class="form-group"> <label for="ecww-loanamount" class="control-label">Loan Amount</label> <div class="input-group"> <span class="ecww-addon input-group-addon"><span class="glyphicon glyphicon-rupee"></span></span> <input type="text" class="form-control ecww-userinput" id="ecww-loanamount" value="00"tabindex="1" placeholder="Loan Amount"/> </div></div><div class="form-group"> <label for="ecww-loaninterest" class="control-label">Interest Rate</label> <div class="input-group"> <span class="ecww-addon input-group-addon"><span class="glyphicon glyphicon-percent"></span></span> <input type="text" class="form-control ecww-userinput" id="ecww-loaninterest" tabindex="2" placeholder="Interest Rate"/> </div></div><div class="form-group"> <label for="ecww-loanterm" class="control-label">Loan Tenure</label> <div class="form-group"> <div class="ecww-tenure-choice"> <div class="btn-group" data-toggle="buttons"> <label class="btn btn-primary active"> <input type="radio" name="ecww-loantenure" id="ecww-loanyears" tabindex="4" autocomplete="off" checked/>Yr </label> <label class="btn btn-primary"> <input type="radio" name="ecww-loantenure" id="ecww-loanmonths" tabindex="5" autocomplete="off"/>Mo </label></div></div> <div class="ecww-inline-input-group"> <div class="input-group"> <span class="ecww-addon input-group-addon"><span class="glyphicon glyphicon-time"></span></span> <input type="text" class="form-control ecww-userinput" id="ecww-loanterm" tabindex="3" placeholder="Loan Tenure"/> </div></div></div></div><div class="clearfix"></div></div></form><div id="ecww-summary" class="col-xs-12 col-sm-4 no-pad"><div id="ecww-monthlypayment"><h4>Loan EMI</h4><p>\u20b9 1,24,797</p></div><div id="ecww-totalinterest"><h4>Total Interest Payable</h4><p>\u20b9 34,90,279</p></div><div id="ecww-totalamount"><h4>Total of Payments<br/>(Principal + Interest)</h4><p>\u20b9 59,90,279</p></div></div><div id="ecww-piechart" class="highcharts-container col-xs-12 col-sm-4 no-pad"></div>');
    h = {
      colors: "#9DCE2C #F7B850 #ED561B #DDDF00 #24CBE5 #64E572 #FF9655 #FFF263 #6AF9C4".split(" "),
      chart: {
        backgroundColor: "#FFFFFF",
        borderWidth: 1,
        borderColor: "#DBDAD7",
        borderRadius: 0,
        plotBackgroundColor: "#FFFFFF",
        plotShadow: !1,
        plotBorderWidth: 1,
        style: {
          fontFamily: "Helvetica, Arial, Verdana, sans-serif",
          fontSize: "13px",
          fontWeight: "normal",
          color: "#888888"
        }
      },
      tooltip: {
        style: {
          color: "#444444",
          font: "13px Helvetica, Arial, Verdana, sans-serif"
        }
      },
      title: {
        style: {
          color: "#444444",
          font: "bold 13px Helvetica, Arial, Verdana, sans-serif"
        }
      },
      subtitle: {
        style: {
          color: "#888888",
          font: "13px Helvetica, Arial, Verdana, sans-serif"
        }
      },
      xAxis: {
        gridLineWidth: 0,
        lineColor: "#000",
        tickColor: "#000",
        labels: {
          style: {
            color: "#000",
            font: "13px Helvetica, Arial, Verdana, sans-serif"
          }
        },
        title: {
          style: {
            color: "#888888",
            fontWeight: "normal",
            fontSize: "13px",
            fontFamily: "Helvetica, Arial, Verdana, sans-serif"
          }
        }
      },
      yAxis: {
        gridLineWidth: 1,
        lineColor: "#000",
        lineWidth: 1,
        tickWidth: 1,
        tickColor: "#000",
        labels: {
          style: {
            color: "#888888",
            font: "13px Helvetica, Arial, Verdana, sans-serif"
          }
        },
        title: {
          style: {
            color: "#888888",
            fontWeight: "normal",
            fontSize: "13px",
            fontFamily: "Helvetica, Arial, Verdana, sans-serif"
          }
        }
      },
      credits: {
        enabled: !1
      },
      legend: {
        borderColor: "#DBDAD7",
        itemMarginTop: 2,
        itemMarginBottom: 2,
        borderWidth: 1,
        style: {
          color: "#888888",
          fontWeight: "normal",
          fontSize: "13px",
          fontFamily: "Helvetica, Arial, Verdana, sans-serif"
        },
        itemStyle: {
          color: "#888888",
          fontWeight: "normal",
          fontSize: "13px",
          fontFamily: "Helvetica, Arial, Verdana, sans-serif"
        },
        itemHoverStyle: {
          color: "#888888",
          fontWeight: "normal",
          fontSize: "13px",
          fontFamily: "Helvetica, Arial, Verdana, sans-serif"
        },
        itemHiddenStyle: {
          color: "gray",
          fontWeight: "normal",
          fontSize: "13px",
          fontFamily: "Helvetica, Arial, Verdana, sans-serif"
        }
      },
      labels: {
        style: {
          color: "#888888"
        }
      }
    };
    Highcharts.setOptions(h);
    Globalize.addCultureInfo("en-IN", "default", {
      name: "en-IN",
      englishName: "English (India)",
      nativeName: "English (India)",
      numberFormat: {
        groupSizes: [3, 2],
        percent: {
          groupSizes: [3, 2]
        },
        currency: {
          pattern: ["$ -n", "$ n"],
          groupSizes: [3, 2],
          symbol: "Rs."
        }
      },
      calendars: {
        standard: {
          "/": "-",
          firstDay: 1,
          patterns: {
            d: "dd-MM-yyyy",
            D: "dd MMMM yyyy",
            t: "HH:mm",
            T: "HH:mm:ss",
            f: "dd MMMM yyyy HH:mm",
            F: "dd MMMM yyyy HH:mm:ss",
            M: "dd MMMM"
          }
        }
      }
    });
    a("#ecww-loanamount").blur(function() {
      a("#ecww-loanamount").val(k(c("#ecww-loanamount")))
    });
    a("#ecww-loaninterest").blur(function() {
      a("#ecww-loaninterest").val(Math.round(1E3 * c("#ecww-loaninterest")) / 1E3)
    });
    a("#ecww-loanterm").blur(function() {
      a("#ecww-form input[name='ecww-loantenure']")[0].checked ? a("#ecww-loanterm").val(Math.round(Math.round(12 * c("#ecww-loanterm")) /
        12 * 100) / 100) : a("#ecww-loanterm").val(c("#ecww-loanterm"))
    });
    a("#ecww-form input[name='ecww-loantenure']").change(function() {
      a("#ecww-form input[name='ecww-loantenure']")[0].checked ? a("#ecww-loanterm").val(Math.round(c("#ecww-loanterm") / 12 * 100) / 100) : a("#ecww-loanterm").val(Math.round(12 * c("#ecww-loanterm")))
    });
    q();
    l();
    m();
    n()
  }

  function c(b) {
    return 1 * Math.abs(a(b).val().replace(/[^\d\.]/g, ""))
  }

  function g(a) {
    return "\u20b9 " + Globalize.format(1 * a, "n0", "en-IN")
  }

  function k(a) {
    return Globalize.format(1 * a,
      "n0", "en-IN")
  }

  function q() {
    a("#ecww-loanamount").val(k(0));
    a("#ecww-loaninterest").val(0);
    a("#ecww-form input[name='ecww-loantenure']")[0].checked ? a("#ecww-loanterm").val(0) : a("#ecww-loanterm").val(240);
    a(".ecww-userinput").change(function() {
      l();
      m();
      n()
    })
  }

  function l() {
    e = c("#ecww-loanamount");
    d = Math.abs(a("#ecww-loaninterest").val() / 12 / 100);
    b = a("#ecww-form input[name='ecww-loantenure']")[0].checked ? Math.abs(Math.round(12 * a("#ecww-loanterm").val())) : Math.abs(a("#ecww-loanterm").val());
    0 == d &&
      (a("#ecww-loaninterest").val(0), d = .004166666666666667);
    0 == b && (a("#ecww-form input[name='ecww-loantenure']")[0].checked ? a("#ecww-loanterm").val(0) : a("#ecww-loanterm").val(12), b = 12)
  }

  function m() {
    f = Math.pow(1 + d, b) / (Math.pow(1 + d, b) - 1) * d * e;
    a("#ecww-monthlypayment p").text(g(f));
    a("#ecww-totalinterest p").text(g(f * b - e));
    a("#ecww-totalamount p").text(g(f * b))
  }

  function n() {
    new Highcharts.Chart({
      chart: {
        renderTo: "ecww-piechart",
        plotBackgroundColor: null,
        borderWidth: null,
        plotBorderWidth: null,
        plotShadow: !1
      },
      title: {
        text: "Break-up of Total Payment"
      },
      tooltip: {
        formatter: function() {
          return "<b>" + this.point.name + ": " + Math.round(100 * this.percentage) / 100 + "%</b>"
        }
      },
      plotOptions: {
        pie: {
          allowPointSelect: !0,
          cursor: "pointer",
          dataLabels: {
            enabled: !0,
            distance: 10,
            color: "#444444",
            formatter: function() {
              return "<b>" + Math.round(100 * this.percentage) / 100 + "%</b>"
            }
          },
          showInLegend: !0
        }
      },
      series: [{
        type: "pie",
        name: "Principal Loan Amount vs. Total Interest",
        data: [
          ["Principal Loan Amount", e], {
            name: "Total Interest",
            y: f * b - e,
            sliced: !0,
            selected: !0
          }
        ]
      }]
    })
  }
  var e, d, b, f, h, a = jQuery.noConflict(!0);
  a(document).ready(function() {
    p()
  })
})();
